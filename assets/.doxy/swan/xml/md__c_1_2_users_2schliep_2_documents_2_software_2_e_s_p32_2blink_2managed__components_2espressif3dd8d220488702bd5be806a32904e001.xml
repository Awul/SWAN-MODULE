<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif3dd8d220488702bd5be806a32904e001" kind="page">
    <compoundname>md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif____led__strip_2docs_2src_2index</compoundname>
    <title>LED Strip Programming Guide</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><anchor id="md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif3dd8d220488702bd5be806a32904e001_1autotoc_md15"/></para>
<sect1 id="md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif3dd8d220488702bd5be806a32904e001_1autotoc_md16">
<title>Allocate LED Strip Object with RMT Backend</title><para><programlisting filename=".c"><codeline><highlight class="preprocessor">#define<sp/>BLINK_GPIO<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="structled__strip__config__t" kindref="compound">led_strip_config_t</ref><sp/>strip_config<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.strip_gpio_num<sp/>=<sp/>BLINK_GPIO,<sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>GPIO<sp/>that<sp/>connected<sp/>to<sp/>the<sp/>LED<sp/>strip&apos;s<sp/>data<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.max_leds<sp/>=<sp/>1,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>number<sp/>of<sp/>LEDs<sp/>in<sp/>the<sp/>strip,</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.led_model<sp/>=<sp/>LED_MODEL_WS2812,<sp/></highlight><highlight class="comment">//<sp/>LED<sp/>strip<sp/>model,<sp/>it<sp/>determines<sp/>the<sp/>bit<sp/>timing</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.color_component_format<sp/>=<sp/>LED_STRIP_COLOR_COMPONENT_FMT_GRB,<sp/></highlight><highlight class="comment">//<sp/>The<sp/>color<sp/>component<sp/>format<sp/>is<sp/>G-R-B</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.flags<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.invert_out<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>invert<sp/>the<sp/>output<sp/>signal</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="structled__strip__rmt__config__t" kindref="compound">led_strip_rmt_config_t</ref><sp/>rmt_config<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.clk_src<sp/>=<sp/>RMT_CLK_SRC_DEFAULT,<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>different<sp/>clock<sp/>source<sp/>can<sp/>lead<sp/>to<sp/>different<sp/>power<sp/>consumption</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.resolution_hz<sp/>=<sp/>10<sp/>*<sp/>1000<sp/>*<sp/>1000,<sp/></highlight><highlight class="comment">//<sp/>RMT<sp/>counter<sp/>clock<sp/>frequency:<sp/>10MHz</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.mem_block_symbols<sp/>=<sp/>64,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>memory<sp/>size<sp/>of<sp/>each<sp/>RMT<sp/>channel,<sp/>in<sp/>words<sp/>(4<sp/>bytes)</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.flags<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.with_dma<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">//<sp/>DMA<sp/>feature<sp/>is<sp/>available<sp/>on<sp/>chips<sp/>like<sp/>ESP32-S3/P4</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">led_strip_handle_t<sp/>led_strip<sp/>=<sp/>NULL;</highlight></codeline>
<codeline><highlight class="normal">ESP_ERROR_CHECK(led_strip_new_rmt_device(&amp;strip_config,<sp/>&amp;rmt_config,<sp/>&amp;led_strip));</highlight></codeline>
</programlisting></para>
<para><hruler/>
</para>
<para>You can create multiple LED strip objects with different GPIOs and pixel numbers. The backend driver will automatically allocate sufficient RMT channels for you wherever possible. If the RMT channels are not enough, the <ulink url="api.md#function-led_strip_new_rmt_device">led_strip_new_rmt_device</ulink> will return an error.</para>
</sect1>
<sect1 id="md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif3dd8d220488702bd5be806a32904e001_1autotoc_md18">
<title>Allocate LED Strip Object with SPI Backend</title><para><programlisting filename=".c"><codeline><highlight class="preprocessor">#define<sp/>BLINK_GPIO<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="structled__strip__config__t" kindref="compound">led_strip_config_t</ref><sp/>strip_config<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.strip_gpio_num<sp/>=<sp/>BLINK_GPIO,<sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>GPIO<sp/>that<sp/>connected<sp/>to<sp/>the<sp/>LED<sp/>strip&apos;s<sp/>data<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.max_leds<sp/>=<sp/>1,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>number<sp/>of<sp/>LEDs<sp/>in<sp/>the<sp/>strip,</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.led_model<sp/>=<sp/>LED_MODEL_WS2812,<sp/></highlight><highlight class="comment">//<sp/>LED<sp/>strip<sp/>model,<sp/>it<sp/>determines<sp/>the<sp/>bit<sp/>timing</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.color_component_format<sp/>=<sp/>LED_STRIP_COLOR_COMPONENT_FMT_GRB,<sp/></highlight><highlight class="comment">//<sp/>The<sp/>color<sp/>component<sp/>format<sp/>is<sp/>G-R-B</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.flags<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.invert_out<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>invert<sp/>the<sp/>output<sp/>signal</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="structled__strip__spi__config__t" kindref="compound">led_strip_spi_config_t</ref><sp/>spi_config<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.clk_src<sp/>=<sp/>SPI_CLK_SRC_DEFAULT,<sp/></highlight><highlight class="comment">//<sp/>different<sp/>clock<sp/>source<sp/>can<sp/>lead<sp/>to<sp/>different<sp/>power<sp/>consumption</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.spi_bus<sp/>=<sp/>SPI2_HOST,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SPI<sp/>bus<sp/>ID</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.flags<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.with_dma<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">//<sp/>Using<sp/>DMA<sp/>can<sp/>improve<sp/>performance<sp/>and<sp/>help<sp/>drive<sp/>more<sp/>LEDs</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">led_strip_handle_t<sp/>led_strip<sp/>=<sp/>NULL;</highlight></codeline>
<codeline><highlight class="normal">ESP_ERROR_CHECK(led_strip_new_spi_device(&amp;strip_config,<sp/>&amp;spi_config,<sp/>&amp;led_strip));</highlight></codeline>
</programlisting></para>
<para><hruler/>
</para>
<para>The number of LED strip objects can be created depends on how many free SPI controllers are free to use in your project.</para>
</sect1>
<sect1 id="md__c_1_2_users_2schliep_2_documents_2_software_2_e_s_p32_2blink_2managed__components_2espressif3dd8d220488702bd5be806a32904e001_1autotoc_md20">
<title>FAQ</title><para><itemizedlist>
<listitem><para>How to set the brightness of the LED strip?<itemizedlist>
<listitem><para>You can tune the brightness by scaling the value of each R-G-B element with a <bold>same</bold> factor. But pay attention to the overflow of the value. </para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
</sect1>
    </detaileddescription>
    <location file="C:/Users/schliep/Documents/Software/ESP32/blink/managed_components/espressif__led_strip/docs/src/index.md"/>
  </compounddef>
</doxygen>
